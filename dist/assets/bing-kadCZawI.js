import{a as t,o as I,u as L,c as s,i as f,S as N,b as _,t as $,d as P}from"./index-CbUl5EtK.js";import{C as G,a as b,M as R}from"./main.layout-LA4sCvUs.js";import{A as H,C as K,a as U,b as k,E as l,c as y,d as w,S as q}from"./api.service-bvfpwsFL.js";var D=$('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body>');function F(){const[o,g]=t(""),[a,r]=t([]),[u,h]=t(!1),[c,B]=t(!1),[m,T]=t(!1),[p,v]=t(!1),[E,x]=t(!1),[M,C]=t(!1),S=()=>{r([]),g(""),h(!1),v(!1),C(!1)},O=async()=>{if(u()||!o()||o().length<1)return;p()||v(!0);const e=o().trim();g(""),h(!0),r([...a(),{sender:l.USER,messages:e}]),await y.get({url:`?text=${e}`,name:"System",server:w.BING,success:n=>{const i=n.data;i.status?r([...a(),{sender:l.BOT,messages:i.result}]):(C(!0),!e||e.length<1?r([...a(),{sender:l.BOT,messages:"Please type a message to send!"}]):r([...a(),{sender:l.BOT,messages:i.message}]))},error:()=>{C(!0),r([...a(),{sender:l.BOT,messages:"Something went wrong, please try again later"}])},finally:()=>{h(!1),x(!0)}})};return I(async()=>{await y.get({url:"",name:"System",server:w.CHECK_STATUS,success:e=>{e.data.status&&T(!0)},finally:()=>{B(!0)}})}),L(e=>{p()&&!e.defaultPrevented&&(e.preventDefault(),setTimeout(()=>{P.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:q()}).then(n=>{n.isConfirmed&&e.retry(!0)})},100))}),s(R,{title:"BING",get children(){return[s(H,{get isPlaying(){return E()},setIsPlaying:x}),(()=>{var e=D(),n=e.firstChild,i=n.firstChild,d=i.firstChild;return f(d,s(G,{title:"BING",get isLoading(){return u()||!c()||!p()||!m()},onNewChat:S}),null),f(d,s(K,{get isMounted(){return c()}}),null),f(d,s(N,{get when(){return _(()=>!!c())()&&m()},get children(){return[s(U,{get chat(){return a()},get isLoading(){return u()}}),s(b,{get value(){return o()},get isLoading(){return u()},get isError(){return M()},onSend:O,onNewChat:S,onChange:A=>g(A.target.value)})]}}),null),f(d,s(k,{get isMounted(){return c()},get isApiOnline(){return m()}}),null),e})()]}})}export{F as default};
