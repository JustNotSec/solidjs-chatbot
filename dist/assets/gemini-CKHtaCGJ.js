import{a as t,o as O,u as L,c as s,i as f,S as N,b as _,t as $,d as P}from"./index-BdmIpMR6.js";import{C as G,a as b,M as R}from"./main.layout-BiZ8gEEN.js";import{A as H,C as K,a as U,b as k,E as l,S as q}from"./loading-DWoe-hDB.js";import{A as y,E as w}from"./api.service-yepg01NU.js";var D=$('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body>');function J(){const[o,g]=t(""),[a,r]=t([]),[u,h]=t(!1),[c,E]=t(!1),[m,M]=t(!1),[p,v]=t(!1),[I,x]=t(!1),[T,C]=t(!1),S=()=>{r([]),g(""),h(!1),v(!1),C(!1)},A=async()=>{if(u()||!o()||o().length<1)return;p()||v(!0);const e=o().trim();g(""),h(!0),r([...a(),{sender:l.USER,messages:e}]),await y.get({url:`?text=${e}`,name:"System",server:w.GEMINI,success:n=>{const i=n.data;i.status?r([...a(),{sender:l.BOT,messages:i.result}]):(C(!0),!e||e.length<1?r([...a(),{sender:l.BOT,messages:"Please type a message to send!"}]):r([...a(),{sender:l.BOT,messages:i.message}]))},error:()=>{C(!0),r([...a(),{sender:l.BOT,messages:"Something went wrong, please try again later"}])},finally:()=>{h(!1),x(!0)}})};return O(async()=>{await y.get({url:"",name:"System",server:w.CHECK_STATUS,success:e=>{e.data.status&&M(!0)},finally:()=>{E(!0)}})}),L(e=>{p()&&!e.defaultPrevented&&(e.preventDefault(),setTimeout(()=>{P.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:q()}).then(n=>{n.isConfirmed&&e.retry(!0)})},100))}),s(R,{title:"GEMINI",get children(){return[s(H,{get isPlaying(){return I()},setIsPlaying:x}),(()=>{var e=D(),n=e.firstChild,i=n.firstChild,d=i.firstChild;return f(d,s(G,{title:"GEMINI",get isLoading(){return u()||!c()||!p()||!m()},onNewChat:S}),null),f(d,s(K,{get isMounted(){return c()}}),null),f(d,s(N,{get when(){return _(()=>!!c())()&&m()},get children(){return[s(U,{get chat(){return a()},get isLoading(){return u()}}),s(b,{get value(){return o()},get isLoading(){return u()},get isError(){return T()},onSend:A,onNewChat:S,onChange:B=>g(B.target.value)})]}}),null),f(d,s(k,{get isMounted(){return c()},get isApiOnline(){return m()}}),null),e})()]}})}export{J as default};
