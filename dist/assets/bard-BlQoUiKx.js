import{a as t,o as L,u as R,c as s,i as f,S as _,b as $,t as D,d as P}from"./index-kK-5tPUc.js";import{C as I,a as b,M as N}from"./main.layout-CfD1tZa9.js";import{A as H,C as K,a as U,b as k,E as l,S as q}from"./loading-EQRN8GaT.js";import{A as y,E as w}from"./api.service-DoJg4tnn.js";var Y=D('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body>');function J(){const[o,g]=t(""),[a,r]=t([]),[u,h]=t(!1),[c,A]=t(!1),[m,B]=t(!1),[p,v]=t(!1),[T,x]=t(!1),[E,C]=t(!1),S=()=>{r([]),g(""),h(!1),v(!1),C(!1)},M=async()=>{if(u()||!o()||o().length<1)return;p()||v(!0);const e=o().trim();g(""),h(!0),r([...a(),{sender:l.USER,messages:e}]),await y.get({url:`?text=${e}`,name:"System",server:w.BARD,success:n=>{const i=n.data;i.status?r([...a(),{sender:l.BOT,messages:i.result}]):(C(!0),!e||e.length<1?r([...a(),{sender:l.BOT,messages:"Please type a message to send!"}]):r([...a(),{sender:l.BOT,messages:i.message}]))},error:()=>{C(!0),r([...a(),{sender:l.BOT,messages:"Something went wrong, please try again later"}])},finally:()=>{h(!1),x(!0)}})};return L(async()=>{await y.get({url:"",name:"System",server:w.CHECK_STATUS,success:e=>{e.data.status&&B(!0)},finally:()=>{A(!0)}})}),R(e=>{p()&&!e.defaultPrevented&&(e.preventDefault(),setTimeout(()=>{P.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:q()}).then(n=>{n.isConfirmed&&e.retry(!0)})},100))}),s(N,{title:"BARD",get children(){return[s(H,{get isPlaying(){return T()},setIsPlaying:x}),(()=>{var e=Y(),n=e.firstChild,i=n.firstChild,d=i.firstChild;return f(d,s(I,{title:"BARD",get isLoading(){return u()||!c()||!p()||!m()},onNewChat:S}),null),f(d,s(K,{get isMounted(){return c()}}),null),f(d,s(_,{get when(){return $(()=>!!c())()&&m()},get children(){return[s(U,{get chat(){return a()},get isLoading(){return u()}}),s(b,{get value(){return o()},get isLoading(){return u()},get isError(){return E()},onSend:M,onNewChat:S,onChange:O=>g(O.target.value)})]}}),null),f(d,s(k,{get isMounted(){return c()},get isApiOnline(){return m()}}),null),e})()]}})}export{J as default};
