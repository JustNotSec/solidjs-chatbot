import{a as o,u as R,c as s,i as r,F as M,S as G,M as B,b as x,d as _,t as i,e as I,f as N}from"./index-CyBZO2Hh.js";import{M as j}from"./main.layout-DgMFyW98.js";import{E as a,A as q,a as F}from"./api.service-BdxSKbw2.js";var U=i('<div class="chat chat-start"><div class=chat-bubble><span class="loading loading-dots loading-md">'),D=i('<button type=submit class="btn btn-error">New Chat'),K=i('<button type=submit class="btn btn-error">Send'),Y=i('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body><div class="flex justify-between items-center"><h2 class=card-title>GPT4 AI</h2><button type=button class="btn btn-ghost">New Chat</button></div><div class="divider divider-lg"></div><div class="overflow-y-auto h-[31rem]"></div><div class="flex gap-2 w-full mt-[2vh]"><input required type=text class="input input-primary w-full"placeholder="Type a message to AI">'),z=i('<div class="chat chat-start mt-[2vh]"><div class=chat-bubble>'),H=i('<div class="chat chat-end"><div class=chat-bubble>');function W(){const[h,f]=o(""),[l,n]=o([]),[g,m]=o(!1),[w,y]=o(!1),[C,p]=o(!1),S=()=>{n([]),f(""),m(!1),y(!1),p(!1)},O=async()=>{if(g()||!h()||h().length<1)return;w()||y(!0);const t=h().trim();f(""),m(!0),n([...l(),{sender:a.USER,messages:t}]),await q.get({url:`?text=${t}`,name:"System",server:F.GPT,success:d=>{const c=d.data;c.status?n([...l(),{sender:a.BOT,messages:c.result}]):(p(!0),!t||t.length<1?n([...l(),{sender:a.BOT,messages:"Please type a message to send!"}]):n([...l(),{sender:a.BOT,messages:c.message}]))},error:()=>{p(!0),n([...l(),{sender:a.BOT,messages:"Something went wrong, please try again later"}])},finally:()=>{m(!1)}})};return R(t=>{w()&&!t.defaultPrevented&&(t.preventDefault(),setTimeout(()=>{I.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:`
            <div class="flex justify-center items-center gap-4 mt-4">
              <span>
                Apakah anda yakin ingin meninggalkan halaman ini?
                <br />
                Semua data yang sudah di buat akan hilang!!
              </span>
            </div>
          `}).then(d=>{d.isConfirmed&&t.retry(!0)})},100))}),s(j,{get children(){var t=Y(),d=t.firstChild,c=d.firstChild,A=c.firstChild,T=A.firstChild,L=T.firstChild,E=L.nextSibling,P=T.nextSibling,v=P.nextSibling,b=v.nextSibling,k=b.firstChild;return E.$$click=S,r(v,s(M,{get each(){return l()},children:e=>s(G,{get children(){return[s(B,{get when(){return e.sender===a.BOT},get children(){var u=z(),$=u.firstChild;return r($,()=>e.messages),u}}),s(B,{get when(){return e.sender===a.USER},get children(){var u=H(),$=u.firstChild;return r($,()=>e.messages),u}})]}})}),null),r(v,s(x,{get when(){return g()},get children(){return U()}}),null),k.addEventListener("change",e=>f(e.target.value)),r(b,s(x,{get when(){return C()},get children(){var e=D();return e.$$click=S,e}}),null),r(b,s(x,{get when(){return!C()},get children(){var e=K();return e.$$click=O,_(()=>e.disabled=g()),e}}),null),_(()=>E.disabled=g()),_(()=>k.value=h()),t}})}N(["click"]);export{W as default};
