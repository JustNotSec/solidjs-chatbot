import{a as t,o as P,u as L,c as s,i as g,S as _,b as $,t as G,d as I}from"./index-cXXV2_wI.js";import{C as b,a as N,M as R}from"./main.layout-BsmM__Yx.js";import{A as H,C as K,a as U,b as k,E as l,S as q}from"./loading-uLk75HEi.js";import{A as T,E as w}from"./api.service-C560NluC.js";var D=G('<div class="w-[85%] h-full px-4 xl:px-4 2xl:px-5 xl:py-2 overflow-clip"><div class="flex flex-col gap-4"><div class="card shadow-2xl"><div class=card-body>');function J(){const[o,h]=t(""),[a,r]=t([]),[u,m]=t(!1),[c,E]=t(!1),[p,A]=t(!1),[C,v]=t(!1),[B,x]=t(!1),[S,d]=t(!1),y=()=>{r([]),h(""),m(!1),v(!1),d(!1)},M=async()=>{if(u()||!o()||o().length<1)return;C()||v(!0),S()&&d(!1);const e=o().trim();h(""),m(!0),r([...a(),{sender:l.USER,messages:e}]),await T.get({url:`?text=${e}`,name:"System",server:w.GPT,success:n=>{const i=n.data;i.status?r([...a(),{sender:l.BOT,messages:i.result}]):(d(!0),!e||e.length<1?r([...a(),{sender:l.BOT,messages:"Please type a message to send!"}]):r([...a(),{sender:l.BOT,messages:i.message}]))},error:()=>{d(!0),r([...a(),{sender:l.BOT,messages:"Something went wrong, please try again later"}])},finally:()=>{m(!1),x(!0)}})};return P(async()=>{await T.get({url:"",name:"System",server:w.CHECK_STATUS,success:e=>{e.data.status&&A(!0)},finally:()=>{E(!0)}})}),L(e=>{C()&&!e.defaultPrevented&&(e.preventDefault(),setTimeout(()=>{I.fire({title:"Konfirmasi",icon:"question",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak",html:q()}).then(n=>{n.isConfirmed&&e.retry(!0)})},100))}),s(R,{title:"GPT-4",get children(){return[s(H,{get isPlaying(){return B()},setIsPlaying:x}),(()=>{var e=D(),n=e.firstChild,i=n.firstChild,f=i.firstChild;return g(f,s(b,{title:"GPT-4",get isLoading(){return u()||!c()||!C()||!p()},onNewChat:y}),null),g(f,s(K,{get isMounted(){return c()}}),null),g(f,s(_,{get when(){return $(()=>!!c())()&&p()},get children(){return[s(U,{get chat(){return a()},get isLoading(){return u()}}),s(N,{get value(){return o()},get isLoading(){return u()},get isError(){return S()},onSend:M,onNewChat:y,onChange:O=>h(O.target.value)})]}}),null),g(f,s(k,{get isMounted(){return c()},get isApiOnline(){return p()}}),null),e})()]}})}export{J as default};
